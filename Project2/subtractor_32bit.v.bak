module subtractor_32bit(
    input [31:0] a,
    input [31:0] b,
    output [31:0] diff
);
    wire [31:0] b_inverted;
    wire [31:0] add_one_result;

    // Invert all bits of B
    genvar i;
    generate
        for (i = 0; i < 32; i = i + 1) begin : inverter_loop
            not inv(b_inverted[i], b[i]);
        end
    endgenerate

    // Add 1 to the inverted B
    cla_adder_32bit add_one_to_inverted_b(
        .a(b_inverted), 
        .b(32'b1), 
        .sum(add_one_result)
    );

    // Add A to the two's complement of B
    cla_adder_32bit perform_subtraction(
        .a(a), 
        .b(add_one_result), 
        .sum(diff)
    );
endmodule
